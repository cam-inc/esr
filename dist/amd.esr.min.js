define(function(){"use strict";var n="0.9.3";function e(n,e){if(e==null){return n}var r=n.length,t=-1,i=e.length;while(++t<i){n[r+t]=e[t]}return n}var r=e;function t(n){return n}var i=t;function a(n){return function(e){return e[n]}}var o=a;function u(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var f=u;var l;var c;function s(){c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];l=true;for(var n in{toString:null}){l=false}}function v(n,e,r){var t,i=0;if(l==null){s()}for(t in n){if(h(e,n,t,r)===false){break}}if(l){var a=n.constructor,o=!!a&&n===a.prototype;while(t=c[i++]){if((t!=="constructor"||!o&&f(n,t))&&n[t]!==Object.prototype[t]){if(h(e,n,t,r)===false){break}}}}}function h(n,e,r,t){return n.call(t,e[r],r,e)}var d=v;function p(n,e,r){d(n,function(t,i){if(f(n,i)){return e.call(r,n[i],i,n)}})}var g=p;var y=/^\[object (.*)\]$/;var w=Object.prototype.toString;var m;function b(n){if(n===null){return"Null"}else if(n===m){return"Undefined"}else{return y.exec(w.call(n))[1]}}var O=b;function _(n,e){return O(n)===e}var x=_;var E=Array.isArray||function(n){return x(n,"Array")};var A=E;function k(n,e){var r=-1,t=n.length;while(++r<t){if(S(n[r],e)){return true}}return false}function j(n,e){var r=-1,t=e.length;while(++r<t){if(!k(n,e[r])){return false}}return true}function P(n,e){var r=true;g(e,function(e,t){if(!S(n[t],e)){return r=false}});return r}function S(n,e){if(n&&typeof n==="object"&&e&&typeof e==="object"){if(A(n)&&A(e)){return j(n,e)}else{return P(n,e)}}else{return n===e}}var R=S;function T(n,e){if(n==null){return i}switch(typeof n){case"function":return typeof e!=="undefined"?function(r,t,i){return n.call(e,r,t,i)}:n;case"object":return function(e){return R(e,n)};case"string":case"number":return o(n)}}var M=T;function L(n,e,t){e=M(e,t);var i=[];if(n==null){return i}var a=-1,o=n.length;while(++a<o){var u=e(n[a],a,n);if(u!=null){r(i,u)}}return i}var B=L;function H(n,e,r){r=r||0;if(n==null){return-1}var t=n.length,i=r<0?t+r:r;while(i<t){if(n[i]===e){return i}i++}return-1}var I=H;function U(n,e){if(e==null){return n}var r=-1,t=e.length;while(++r<t){if(I(n,e[r])===-1){n.push(e[r])}}return n}var C=U;function F(n,e,r){e=M(e,r);var t=[];if(n==null){return t}var i=-1,a=n.length,o;while(++i<a){o=n[i];if(e(o,i,n)){t.push(o)}}return t}var Y=F;function $(n){return Y(n,function(n){return n!=null})}var W=$;function q(n,e){return I(n,e)!==-1}var N=q;function D(n,e){e=e||J;return Y(n,function(n,r,t){var i=t.length;while(++r<i){if(e(n,t[r])){return false}}return true})}function J(n,e){return n===e}var z=D;function G(n,e,r){e=M(e,r);var t=false;if(n==null){return t}var i=-1,a=n.length;while(++i<a){if(e(n[i],i,n)){t=true;break}}return t}var V=G;function K(n,e,r){var t=n.length;if(e==null){e=0}else if(e<0){e=Math.max(t+e,0)}else{e=Math.min(e,t)}if(r==null){r=t}else if(r<0){r=Math.max(t+r,0)}else{r=Math.min(r,t)}var i=[];while(e<r){i.push(n[e++])}return i}var Q=K;function X(n){var e=Q(arguments,1),r=Y(z(n),function(n){return!V(e,function(e){return N(e,n)})});return r}var Z=X;function nn(n,e){if(n===e){return n!==0||1/n===1/e}return n!==n&&e!==e}var en=nn;function rn(n,e,r){e=M(e,r);var t=true;if(n==null){return t}var i=-1,a=n.length;while(++i<a){if(!e(n[i],i,n)){t=false;break}}return t}var tn=rn;function an(n,e,r){r=r||en;if(!A(n)||!A(e)){return r(n,e)}if(n.length!==e.length){return false}return tn(n,on(r),e)}function on(n){return function(e,r){return r in this&&n(e,this[r])}}var un=an;function fn(n,e,r){e=M(e,r);if(n==null){return-1}var t=-1,i=n.length;while(++t<i){if(e(n[t],t,n)){return t}}return-1}var ln=fn;function cn(n,e,r){var t=ln(n,e,r);return t>=0?n[t]:void 0}var sn=cn;function vn(n,e,r){e=M(e,r);if(n==null){return-1}var t=n.length;while(--t>=0){if(e(n[t],t,n)){return t}}return-1}var hn=vn;function dn(n,e,r){var t=hn(n,e,r);return t>=0?n[t]:void 0}var pn=dn;function gn(n,e,t){if(t===0){r(e,n);return e}var i,a=-1,o=n.length;while(++a<o){i=n[a];if(A(i)){gn(i,e,t-1)}else{e.push(i)}}return e}function yn(n,e){if(n==null){return[]}e=e==null?-1:e;return gn(n,[],e)}var wn=yn;function mn(n,e,r){if(n==null){return}var t=-1,i=n.length;while(++t<i){if(e.call(r,n[t],t,n)===false){break}}}var bn=mn;function On(n,e,r){if(e){e=M(e,r)}else{e=i}var t={};bn(n,function(n){var r=e(n);if(!(r in t)){t[r]=[]}t[r].push(n)});return t}var _n=On;function xn(n,e,r){var t=[];if(n==null){return t}r=typeof r==="number"?r:0;var i=n.length;var a=r>=0?r:i+r;while(a<i){if(n[a]===e){t.push(a)}a++}return t}var En=xn;function An(n,e){var r=Z(Q(arguments,1),n);if(r.length){Array.prototype.push.apply(n,r)}return n.length}var kn=An;function jn(n){var e=Q(arguments,1),r=Y(z(n),function(n){return tn(e,function(e){return N(e,n)})});return r}var Pn=jn;function Sn(n,e,r){if(n==null){return n}var t=Q(arguments,2);var i=-1,a=n.length,o;while(++i<a){o=n[i];o[e].apply(o,t)}return n}var Rn=Sn;function Tn(n){return n!=null&&n!==""}function Mn(n,e){e=e||"";return Y(n,Tn).join(e)}var Ln=Mn;function Bn(n){if(n==null||n.length<1){return undefined}return n[n.length-1]}var Hn=Bn;function In(n,e,r){if(n==null){return-1}var t=n.length;r=r==null||r>=t?t-1:r;r=r<0?t+r:r;while(r>=0){if(n[r]===e){return r}r--}return-1}var Un=In;function Cn(n,e,r){e=M(e,r);var t=[];if(n==null){return t}var i=-1,a=n.length;while(++i<a){t[i]=e(n[i],i,n)}return t}var Fn=Cn;function Yn(n,e,r){if(n==null||!n.length){return Infinity}else if(n.length&&!e){return Math.max.apply(Math,n)}else{e=M(e,r);var t,i=-Infinity,a,o;var u=-1,f=n.length;while(++u<f){a=n[u];o=e(a,u,n);if(o>i){i=o;t=a}}return t}}var $n=Yn;function Wn(n,e,r){if(n==null||!n.length){return-Infinity}else if(n.length&&!e){return Math.min.apply(Math,n)}else{e=M(e,r);var t,i=Infinity,a,o;var u=-1,f=n.length;while(++u<f){a=n[u];o=e(a,u,n);if(o<i){i=o;t=a}}return t}}var qn=Wn;var Nn=-2147483648;var Dn=2147483647;function Jn(){return Jn.get()}Jn.get=Math.random;var zn=Jn;function Gn(n,e){n=n==null?Nn:n;e=e==null?Dn:e;return n+(e-n)*zn()}var Vn=Gn;function Kn(n,e){n=n==null?Nn:~~n;e=e==null?Dn:~~e;return Math.round(Vn(n-.5,e+.499999999999))}var Qn=Kn;function Xn(n,e){if(e!=null){var r=[];if(e>0&&n&&n.length){e=e>n.length?n.length:e;while(e--){r.push(Zn(n))}}return r}return n&&n.length?Zn(n):void 0}function Zn(n){var e=Qn(0,n.length-1);return n.splice(e,1)[0]}var ne=Xn;function ee(n,e){return Fn(n,e)}var re=ee;function te(n,e,r){n=Math.floor(n/e);if(r){return n%r}return n}var ie=te;function ae(n,e,r){if(e==null){e=n;n=0}r=r||1;var t=[],i=ie(e-n,r),a=n;while(a<=e){t.push(a);a+=r}return t}var oe=ae;function ue(n,e,r){var t=arguments.length>2,i=r;if(n==null||!n.length){if(!t){throw new Error("reduce of empty array with no initial value")}else{return r}}var a=-1,o=n.length;while(++a<o){if(!t){i=n[a];t=true}else{i=e(i,n[a],a,n)}}return i}var fe=ue;function le(n,e,r){var t=arguments.length>2;if(n==null||!n.length){if(t){return r}else{throw new Error("reduce of empty array with no initial value")}}var i=n.length,a=r,o;while(--i>=0){o=n[i];if(!t){a=o;t=true}else{a=e(a,o,i,n)}}return a}var ce=le;function se(n,e,r){e=M(e,r);var t=[];if(n==null){return t}var i=-1,a=n.length,o;while(++i<a){o=n[i];if(!e(o,i,n)){t.push(o)}}return t}var ve=se;function he(n,e){var r=I(n,e);if(r!==-1){n.splice(r,1)}}var de=he;function pe(n,e){var r=I(n,e);while(r!==-1){n.splice(r,1);r=I(n,e,r)}}var ge=pe;function ye(n){var e=n.slice();e.reverse();return e}var we=ye;function me(n){var e=[],r;if(n==null){return e}var t=-1,i=n.length;while(++t<i){if(!t){e[0]=n[0]}else{r=Qn(0,t);e[t]=e[r];e[r]=n[t]}}return e}var be=me;function Oe(n,e){if(n==null){return[]}else if(n.length<2){return n}if(e==null){e=_e}var r,t,i;r=~~(n.length/2);t=Oe(n.slice(0,r),e);i=Oe(n.slice(r,n.length),e);return xe(t,i,e)}function _e(n,e){return n<e?-1:n>e?1:0}function xe(n,e,r){var t=[];while(n.length&&e.length){if(r(n[0],e[0])<=0){t.push(n.shift())}else{t.push(e.shift())}}if(n.length){t.push.apply(t,n)}if(e.length){t.push.apply(t,e)}return t}var Ee=Oe;function Ae(n,e,r){e=M(e,r);return Ee(n,function(n,r){n=e(n);r=e(r);return n<r?-1:n>r?1:0})}var ke=Ae;function je(n,e){e=e||2;var r=[];if(n==null){return r}var t=Math.floor(n.length/e),i=n.length%e,a=0,o=n.length,u=0,f;while(a<o){f=t;if(u<i){f++}r.push(n.slice(a,a+f));u++;a+=f}return r}var Pe=je;function Se(n,e,r){var t=-1;var i=[];if(!r){while(++t<n){i[t]=e(t,n)}}else{while(++t<n){i[t]=e.call(r,t,n)}}return i}var Re=Se;function Te(n){return x(n,"Function")}var Me=Te;function Le(n,e){var r={};if(n==null){return r}var t=-1,i=n.length,a;if(Me(e)){while(++t<i){a=n[t];r[e(a)]=a}}else{while(++t<i){a=n[t];r[a[e]]=a}}return r}var Be=Le;function He(n){var e=arguments;var t=[];var i=-1,a=arguments.length;while(++i<a){r(t,e[i])}return z(t)}var Ie=He;function Ue(n,e){n=z(n);e=z(e);var r=Y(n,function(n){return!N(e,n)}),t=Y(e,function(e){return!N(n,e)});return r.concat(t)}var Ce=Ue;function Fe(n){return n==null?0:n.length}function Ye(n){var e=arguments;var r=n?$n(Fn(arguments,Fe)):0,t=[],i=-1;while(++i<r){t.push(Fn(e,function(n){return n==null?undefined:n[i]}))}return t}var $e=Ye;var We={append:r,collect:B,combine:C,compact:W,contains:N,difference:Z,equals:un,every:tn,filter:Y,find:sn,findIndex:ln,findLast:pn,findLastIndex:hn,flatten:wn,forEach:bn,groupBy:_n,indexOf:I,indicesOf:En,insert:kn,intersection:Pn,invoke:Rn,join:Ln,last:Hn,lastIndexOf:Un,map:Fn,max:$n,min:qn,pick:ne,pluck:re,range:oe,reduce:fe,reduceRight:ce,reject:ve,remove:de,removeAll:ge,reverse:we,shuffle:be,slice:Q,some:V,sort:Ee,sortBy:ke,split:Pe,take:Re,toLookup:Be,union:Ie,unique:z,xor:Ce,zip:$e};var qe=We.find;var Ne=We.forEach;var De=Array.isArray||function(n){return Object.prototype.toString.call(n)=="[object Array]"};var Je=sr;var ze=Xe;var Ge=Ze;var Ve=rr;var Ke=cr;var Qe=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Xe(n,e){var r=[];var t=0;var i=0;var a="";var o=e&&e.delimiter||"/";var u;while((u=Qe.exec(n))!=null){var f=u[0];var l=u[1];var c=u.index;a+=n.slice(i,c);i=c+f.length;if(l){a+=l[1];continue}var s=n[i];var v=u[2];var h=u[3];var d=u[4];var p=u[5];var g=u[6];var y=u[7];if(a){r.push(a);a=""}var w=v!=null&&s!=null&&s!==v;var m=g==="+"||g==="*";var b=g==="?"||g==="*";var O=u[2]||o;var _=d||p;r.push({name:h||t++,prefix:v||"",delimiter:O,optional:b,repeat:m,partial:w,asterisk:!!y,pattern:_?ir(_):y?".*":"[^"+tr(O)+"]+?"})}if(i<n.length){a+=n.substr(i)}if(a){r.push(a)}return r}function Ze(n,e){return rr(Xe(n,e))}function nr(n){return encodeURI(n).replace(/[\/?#]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}function er(n){return encodeURI(n).replace(/[?#]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}function rr(n){var e=new Array(n.length);for(var r=0;r<n.length;r++){if(typeof n[r]==="object"){e[r]=new RegExp("^(?:"+n[r].pattern+")$")}}return function(r,t){var i="";var a=r||{};var o=t||{};var u=o.pretty?nr:encodeURIComponent;for(var f=0;f<n.length;f++){var l=n[f];if(typeof l==="string"){i+=l;continue}var c=a[l.name];var s;if(c==null){if(l.optional){if(l.partial){i+=l.prefix}continue}else{throw new TypeError('Expected "'+l.name+'" to be defined')}}if(De(c)){if(!l.repeat){throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`")}if(c.length===0){if(l.optional){continue}else{throw new TypeError('Expected "'+l.name+'" to not be empty')}}for(var v=0;v<c.length;v++){s=u(c[v]);if(!e[f].test(s)){throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(s)+"`")}i+=(v===0?l.prefix:l.delimiter)+s}continue}s=l.asterisk?er(c):u(c);if(!e[f].test(s)){throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+s+'"')}i+=l.prefix+s}return i}}function tr(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ir(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ar(n,e){n.keys=e;return n}function or(n){return n.sensitive?"":"i"}function ur(n,e){var r=n.source.match(/\((?!\?)/g);if(r){for(var t=0;t<r.length;t++){e.push({name:t,prefix:null,delimiter:null,optional:false,repeat:false,partial:false,asterisk:false,pattern:null})}}return ar(n,e)}function fr(n,e,r){var t=[];for(var i=0;i<n.length;i++){t.push(sr(n[i],e,r).source)}var a=new RegExp("(?:"+t.join("|")+")",or(r));return ar(a,e)}function lr(n,e,r){return cr(Xe(n,r),e,r)}function cr(n,e,r){if(!De(e)){r=e||r;e=[]}r=r||{};var t=r.strict;var i=r.end!==false;var a="";for(var o=0;o<n.length;o++){var u=n[o];if(typeof u==="string"){a+=tr(u)}else{var f=tr(u.prefix);var l="(?:"+u.pattern+")";e.push(u);if(u.repeat){l+="(?:"+f+l+")*"}if(u.optional){if(!u.partial){l="(?:"+f+"("+l+"))?"}else{l=f+"("+l+")?"}}else{l=f+"("+l+")"}a+=l}}var c=tr(r.delimiter||"/");var s=a.slice(-c.length)===c;if(!t){a=(s?a.slice(0,-c.length):a)+"(?:"+c+"(?=$))?"}if(i){a+="$"}else{a+=t&&s?"":"(?="+c+"|$)"}return ar(new RegExp("^"+a,or(r)),e)}function sr(n,e,r){if(!De(e)){r=e||r;e=[]}r=r||{};if(n instanceof RegExp){return ur(n,e)}if(De(n)){return fr(n,e,r)}return lr(n,e,r)}Je.parse=ze;Je.compile=Ge;Je.tokensToFunction=Ve;Je.tokensToRegExp=Ke;var vr=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function hr(n){return n&&n.__esModule?n["default"]:n}function dr(n,e){return e={exports:{}},n(e,e.exports),e.exports}var pr=dr(function(n){(function(e){var r=setTimeout;function t(){}function i(n,e){return function(){n.apply(e,arguments)}}function a(n){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof n!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];s(n,this)}function o(n,e){while(n._state===3){n=n._value}if(n._state===0){n._deferreds.push(e);return}n._handled=true;a._immediateFn(function(){var r=n._state===1?e.onFulfilled:e.onRejected;if(r===null){(n._state===1?u:f)(e.promise,n._value);return}var t;try{t=r(n._value)}catch(n){f(e.promise,n);return}u(e.promise,t)})}function u(n,e){try{if(e===n){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(e instanceof a){n._state=3;n._value=e;l(n);return}else if(typeof r==="function"){s(i(r,e),n);return}}n._state=1;n._value=e;l(n)}catch(e){f(n,e)}}function f(n,e){n._state=2;n._value=e;l(n)}function l(n){if(n._state===2&&n._deferreds.length===0){a._immediateFn(function(){if(!n._handled){a._unhandledRejectionFn(n._value)}})}for(var e=0,r=n._deferreds.length;e<r;e++){o(n,n._deferreds[e])}n._deferreds=null}function c(n,e,r){this.onFulfilled=typeof n==="function"?n:null;this.onRejected=typeof e==="function"?e:null;this.promise=r}function s(n,e){var r=false;try{n(function(n){if(r){return}r=true;u(e,n)},function(n){if(r){return}r=true;f(e,n)})}catch(n){if(r){return}r=true;f(e,n)}}a.prototype["catch"]=function(n){return this.then(null,n)};a.prototype.then=function(n,e){var r=new this.constructor(t);o(this,new c(n,e,r));return r};a.all=function(n){var e=Array.prototype.slice.call(n);return new a(function(n,r){if(e.length===0){return n([])}var t=e.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var u=o.then;if(typeof u==="function"){u.call(o,function(n){i(a,n)},r);return}}e[a]=o;if(--t===0){n(e)}}catch(n){r(n)}}for(var a=0;a<e.length;a++){i(a,e[a])}})};a.resolve=function(n){if(n&&typeof n==="object"&&n.constructor===a){return n}return new a(function(e){e(n)})};a.reject=function(n){return new a(function(e,r){r(n)})};a.race=function(n){return new a(function(e,r){for(var t=0,i=n.length;t<i;t++){n[t].then(e,r)}})};a._immediateFn=typeof setImmediate==="function"&&function(n){setImmediate(n)}||function(n){r(n,0)};a._unhandledRejectionFn=function n(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};a._setImmediateFn=function n(e){a._immediateFn=e};a._setUnhandledRejectionFn=function n(e){a._unhandledRejectionFn=e};if("object"!=="undefined"&&n.exports){n.exports=a}else if(!e.Promise){e.Promise=a}})(vr)});var gr=function(){};{gr=function(n,e,r){var t=arguments;var i=arguments.length;r=new Array(i>2?i-2:0);for(var a=2;a<i;a++){r[a-2]=t[a]}if(e===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(e.length<10||/^[s\W]*$/.test(e)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+e)}if(!n){var o=0;var u="Warning: "+e.replace(/%s/g,function(){return r[o++]});if(typeof console!=="undefined"){console.error(u)}try{throw new Error(u)}catch(n){}}}}var yr=gr;var wr=function(n,e,r,t,i,a,o,u){{if(e===undefined){throw new Error("invariant requires an error message argument")}}if(!n){var f;if(e===undefined){f=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var l=[r,t,i,a,o,u];var c=0;f=new Error(e.replace(/%s/g,function(){return l[c++]}));f.name="Invariant Violation"}f.framesToPop=1;throw f}};var mr=wr;var br=function n(e){return e.charAt(0)==="/"};var Or=function n(e,r){for(var t=r,i=t+1,a=e.length;i<a;t+=1,i+=1){e[t]=e[i]}e.pop()};var _r=function n(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var t=e&&e.split("/")||[];var i=r&&r.split("/")||[];var a=e&&br(e);var o=r&&br(r);var u=a||o;if(e&&br(e)){i=t}else if(t.length){i.pop();i=i.concat(t)}if(!i.length){return"/"}var f=void 0;if(i.length){var l=i[i.length-1];f=l==="."||l===".."||l===""}else{f=false}var c=0;for(var s=i.length;s>=0;s--){var v=i[s];if(v==="."){Or(i,s)}else if(v===".."){Or(i,s);c++}else if(c){Or(i,s);c--}}if(!u){for(;c--;c){i.unshift("..")}}if(u&&i[0]!==""&&(!i[0]||!br(i[0]))){i.unshift("")}var h=i.join("/");if(f&&h.substr(-1)!=="/"){h+="/"}return h};var xr=_r;var Er=dr(function(n,e){"use strict";e.__esModule=true;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};var t=function n(e,t){if(e===t){return true}if(e==null||t==null){return false}if(Array.isArray(e)){return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}var i=typeof e==="undefined"?"undefined":r(e);var a=typeof t==="undefined"?"undefined":r(t);if(i!==a){return false}if(i==="object"){var o=e.valueOf();var u=t.valueOf();if(o!==e||u!==t){return n(o,u)}var f=Object.keys(e);var l=Object.keys(t);if(f.length!==l.length){return false}return f.every(function(r){return n(e[r],t[r])})}return false};e.default=t});var Ar=hr(Er);var kr=function n(e){return e.charAt(0)==="/"?e:"/"+e};var jr=function n(e){return e.charAt(0)==="/"?e.substr(1):e};var Pr=function n(e,r){return new RegExp("^"+r+"(\\/|\\?|#|$)","i").test(e)};var Sr=function n(e,r){return Pr(e,r)?e.substr(r.length):e};var Rr=function n(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e};var Tr=function n(e){var r=e||"/";var t="";var i="";var a=r.indexOf("#");if(a!==-1){i=r.substr(a);r=r.substr(0,a)}var o=r.indexOf("?");if(o!==-1){t=r.substr(o);r=r.substr(0,o)}return{pathname:r,search:t==="?"?"":t,hash:i==="#"?"":i}};var Mr=function n(e){var r=e.pathname,t=e.search,i=e.hash;var a=r||"/";if(t&&t!=="?"){a+=t.charAt(0)==="?"?t:"?"+t}if(i&&i!=="#"){a+=i.charAt(0)==="#"?i:"#"+i}return a};var Lr=Object.assign||function(n){var e=arguments;for(var r=1;r<arguments.length;r++){var t=e[r];for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){n[i]=t[i]}}}return n};var Br=function n(e,r,t,i){var a=void 0;if(typeof e==="string"){a=Tr(e);a.state=r}else{a=Lr({},e);if(a.pathname===undefined){a.pathname=""}if(a.search){if(a.search.charAt(0)!=="?"){a.search="?"+a.search}}else{a.search=""}if(a.hash){if(a.hash.charAt(0)!=="#"){a.hash="#"+a.hash}}else{a.hash=""}if(r!==undefined&&a.state===undefined){a.state=r}}try{a.pathname=decodeURI(a.pathname)}catch(n){if(n instanceof URIError){throw new URIError('Pathname "'+a.pathname+'" could not be decoded. '+"This is likely caused by an invalid percent-encoding.")}else{throw n}}if(t){a.key=t}if(i){if(!a.pathname){a.pathname=i.pathname}else if(a.pathname.charAt(0)!=="/"){a.pathname=xr(a.pathname,i.pathname)}}else{if(!a.pathname){a.pathname="/"}}return a};var Hr=function n(e,r){return e.pathname===r.pathname&&e.search===r.search&&e.hash===r.hash&&e.key===r.key&&Ar(e.state,r.state)};var Ir=function n(){var e=null;var r=function n(r){yr(e==null,"A history supports only one prompt at a time");e=r;return function(){if(e===r){e=null}}};var t=function n(r,t,i,a){if(e!=null){var o=typeof e==="function"?e(r,t):e;if(typeof o==="string"){if(typeof i==="function"){i(o,a)}else{yr(false,"A history needs a getUserConfirmation function in order to use a prompt message");a(true)}}else{a(o!==false)}}else{a(true)}};var i=[];var a=function n(e){var r=true;var t=function n(){if(r){e.apply(undefined,arguments)}};i.push(t);return function(){r=false;i=i.filter(function(n){return n!==t})}};var o=function n(){var e=arguments;for(var r=arguments.length,t=Array(r),a=0;a<r;a++){t[a]=e[a]}i.forEach(function(n){return n.apply(undefined,t)})};return{setPrompt:r,confirmTransitionTo:t,appendListener:a,notifyListeners:o}};var Ur=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var Cr=function n(e,r,t){return e.addEventListener?e.addEventListener(r,t,false):e.attachEvent("on"+r,t)};var Fr=function n(e,r,t){return e.removeEventListener?e.removeEventListener(r,t,false):e.detachEvent("on"+r,t)};var Yr=function n(e,r){return r(window.confirm(e))};var $r=function n(){var e=window.navigator.userAgent;if((e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1){return false}return window.history&&"pushState"in window.history};var Wr=function n(){return window.navigator.userAgent.indexOf("Trident")===-1};var qr=function n(){return window.navigator.userAgent.indexOf("Firefox")===-1};var Nr=function n(e){return e.state===undefined&&navigator.userAgent.indexOf("CriOS")===-1};var Dr=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};var Jr=Object.assign||function(n){var e=arguments;for(var r=1;r<arguments.length;r++){var t=e[r];for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){n[i]=t[i]}}}return n};var zr="popstate";var Gr="hashchange";var Vr=function n(){try{return window.history.state||{}}catch(n){return{}}};var Kr=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};mr(Ur,"Browser history needs a DOM");var r=window.history;var t=$r();var i=!Wr();var a=e.forceRefresh,o=a===undefined?false:a,u=e.getUserConfirmation,f=u===undefined?Yr:u,l=e.keyLength,c=l===undefined?6:l;var s=e.basename?Rr(kr(e.basename)):"";var v=function n(e){var r=e||{},t=r.key,i=r.state;var a=window.location,o=a.pathname,u=a.search,f=a.hash;var l=o+u+f;yr(!s||Pr(l,s),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+l+'" to begin with "'+s+'".');if(s){l=Sr(l,s)}return Br(l,i,t)};var h=function n(){return Math.random().toString(36).substr(2,c)};var d=Ir();var p=function n(e){Jr(B,e);B.length=r.length;d.notifyListeners(B.location,B.action)};var g=function n(e){if(Nr(e)){return}m(v(e.state))};var y=function n(){m(v(Vr()))};var w=false;var m=function n(e){if(w){w=false;p()}else{var r="POP";d.confirmTransitionTo(e,r,f,function(n){if(n){p({action:r,location:e})}else{b(e)}})}};var b=function n(e){var r=B.location;var t=_.indexOf(r.key);if(t===-1){t=0}var i=_.indexOf(e.key);if(i===-1){i=0}var a=t-i;if(a){w=true;k(a)}};var O=v(Vr());var _=[O.key];var x=function n(e){return s+Mr(e)};var E=function n(e,i){yr(!((typeof e==="undefined"?"undefined":Dr(e))==="object"&&e.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="PUSH";var u=Br(e,i,h(),B.location);d.confirmTransitionTo(u,a,f,function(n){if(!n){return}var e=x(u);var i=u.key,f=u.state;if(t){r.pushState({key:i,state:f},null,e);if(o){window.location.href=e}else{var l=_.indexOf(B.location.key);var c=_.slice(0,l===-1?0:l+1);c.push(u.key);_=c;p({action:a,location:u})}}else{yr(f===undefined,"Browser history cannot push state in browsers that do not support HTML5 history");window.location.href=e}})};var A=function n(e,i){yr(!((typeof e==="undefined"?"undefined":Dr(e))==="object"&&e.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="REPLACE";var u=Br(e,i,h(),B.location);d.confirmTransitionTo(u,a,f,function(n){if(!n){return}var e=x(u);var i=u.key,f=u.state;if(t){r.replaceState({key:i,state:f},null,e);if(o){window.location.replace(e)}else{var l=_.indexOf(B.location.key);if(l!==-1){_[l]=u.key}p({action:a,location:u})}}else{yr(f===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history");window.location.replace(e)}})};var k=function n(e){r.go(e)};var j=function n(){return k(-1)};var P=function n(){return k(1)};var S=0;var R=function n(e){S+=e;if(S===1){Cr(window,zr,g);if(i){Cr(window,Gr,y)}}else if(S===0){Fr(window,zr,g);if(i){Fr(window,Gr,y)}}};var T=false;var M=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=d.setPrompt(e);if(!T){R(1);T=true}return function(){if(T){T=false;R(-1)}return r()}};var L=function n(e){var r=d.appendListener(e);R(1);return function(){R(-1);r()}};var B={length:r.length,action:"POP",location:O,createHref:x,push:E,replace:A,go:k,goBack:j,goForward:P,block:M,listen:L};return B};var Qr=Object.assign||function(n){var e=arguments;for(var r=1;r<arguments.length;r++){var t=e[r];for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){n[i]=t[i]}}}return n};var Xr="hashchange";var Zr={hashbang:{encodePath:function n(e){return e.charAt(0)==="!"?e:"!/"+jr(e)},decodePath:function n(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:jr,decodePath:kr},slash:{encodePath:kr,decodePath:kr}};var nt=function n(){var e=window.location.href;var r=e.indexOf("#");return r===-1?"":e.substring(r+1)};var et=function n(e){return window.location.hash=e};var rt=function n(e){var r=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,r>=0?r:0)+"#"+e)};var tt=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};mr(Ur,"Hash history needs a DOM");var r=window.history;var t=qr();var i=e.getUserConfirmation,a=i===undefined?Yr:i,o=e.hashType,u=o===undefined?"slash":o;var f=e.basename?Rr(kr(e.basename)):"";var l=Zr[u],c=l.encodePath,s=l.decodePath;var v=function n(){var e=s(nt());yr(!f||Pr(e,f),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+e+'" to begin with "'+f+'".');if(f){e=Sr(e,f)}return Br(e)};var h=Ir();var d=function n(e){Qr(H,e);H.length=r.length;h.notifyListeners(H.location,H.action)};var p=false;var g=null;var y=function n(){var e=nt();var r=c(e);if(e!==r){rt(r)}else{var t=v();var i=H.location;if(!p&&Hr(i,t)){return}if(g===Mr(t)){return}g=null;w(t)}};var w=function n(e){if(p){p=false;d()}else{var r="POP";h.confirmTransitionTo(e,r,a,function(n){if(n){d({action:r,location:e})}else{m(e)}})}};var m=function n(e){var r=H.location;var t=x.lastIndexOf(Mr(r));if(t===-1){t=0}var i=x.lastIndexOf(Mr(e));if(i===-1){i=0}var a=t-i;if(a){p=true;j(a)}};var b=nt();var O=c(b);if(b!==O){rt(O)}var _=v();var x=[Mr(_)];var E=function n(e){return"#"+c(f+Mr(e))};var A=function n(e,r){yr(r===undefined,"Hash history cannot push state; it is ignored");var t="PUSH";var i=Br(e,undefined,undefined,H.location);h.confirmTransitionTo(i,t,a,function(n){if(!n){return}var e=Mr(i);var r=c(f+e);var a=nt()!==r;if(a){g=e;et(r);var o=x.lastIndexOf(Mr(H.location));var u=x.slice(0,o===-1?0:o+1);u.push(e);x=u;d({action:t,location:i})}else{yr(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");d()}})};var k=function n(e,r){yr(r===undefined,"Hash history cannot replace state; it is ignored");var t="REPLACE";var i=Br(e,undefined,undefined,H.location);h.confirmTransitionTo(i,t,a,function(n){if(!n){return}var e=Mr(i);var r=c(f+e);var a=nt()!==r;if(a){g=e;rt(r)}var o=x.indexOf(Mr(H.location));if(o!==-1){x[o]=e}d({action:t,location:i})})};var j=function n(e){yr(t,"Hash history go(n) causes a full page reload in this browser");r.go(e)};var P=function n(){return j(-1)};var S=function n(){return j(1)};var R=0;var T=function n(e){R+=e;if(R===1){Cr(window,Xr,y)}else if(R===0){Fr(window,Xr,y)}};var M=false;var L=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var r=h.setPrompt(e);if(!M){T(1);M=true}return function(){if(M){M=false;T(-1)}return r()}};var B=function n(e){var r=h.appendListener(e);T(1);return function(){T(-1);r()}};var H={length:r.length,action:"POP",location:_,createHref:E,push:A,replace:k,go:j,goBack:P,goForward:S,block:L,listen:B};return H};var it=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};var at=Object.assign||function(n){var e=arguments;for(var r=1;r<arguments.length;r++){var t=e[r];for(var i in t){if(Object.prototype.hasOwnProperty.call(t,i)){n[i]=t[i]}}}return n};var ot=function n(e,r,t){return Math.min(Math.max(e,r),t)};var ut=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=e.getUserConfirmation,t=e.initialEntries,i=t===undefined?["/"]:t,a=e.initialIndex,o=a===undefined?0:a,u=e.keyLength,f=u===undefined?6:u;var l=Ir();var c=function n(e){at(x,e);x.length=x.entries.length;l.notifyListeners(x.location,x.action)};var s=function n(){return Math.random().toString(36).substr(2,f)};var v=ot(o,0,i.length-1);var h=i.map(function(n){return typeof n==="string"?Br(n,undefined,s()):Br(n,undefined,n.key||s())});var d=Mr;var p=function n(e,t){yr(!((typeof e==="undefined"?"undefined":it(e))==="object"&&e.state!==undefined&&t!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="PUSH";var a=Br(e,t,s(),x.location);l.confirmTransitionTo(a,i,r,function(n){if(!n){return}var e=x.index;var r=e+1;var t=x.entries.slice(0);if(t.length>r){t.splice(r,t.length-r,a)}else{t.push(a)}c({action:i,location:a,index:r,entries:t})})};var g=function n(e,t){yr(!((typeof e==="undefined"?"undefined":it(e))==="object"&&e.state!==undefined&&t!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="REPLACE";var a=Br(e,t,s(),x.location);l.confirmTransitionTo(a,i,r,function(n){if(!n){return}x.entries[x.index]=a;c({action:i,location:a})})};var y=function n(e){var t=ot(x.index+e,0,x.entries.length-1);var i="POP";var a=x.entries[t];l.confirmTransitionTo(a,i,r,function(n){if(n){c({action:i,location:a,index:t})}else{c()}})};var w=function n(){return y(-1)};var m=function n(){return y(1)};var b=function n(e){var r=x.index+e;return r>=0&&r<x.entries.length};var O=function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return l.setPrompt(e)};var _=function n(e){return l.appendListener(e)};var x={length:h.length,action:"POP",location:h[v],index:v,entries:h,createHref:d,push:p,replace:g,go:y,goBack:w,goForward:m,canGo:b,block:O,listen:_};return x};var ft={BROWSER:"BROWSER",MEMORY:"MEMORY",HASH:"HASH"};var lt=function n(e){if(e===void 0)e=ft.BROWSER;switch(e){case ft.BROWSER:this._history=Kr();break;case ft.MEMORY:this._history=ut();break;case ft.HASH:this._history=tt();break;default:break}this._routes=[];this._unlistener=null;this._onBefore=null;this._onBeforeOnce=null;this._onAfter=null;this._onAfterOnce=null};lt.prototype.start=function n(e){var r=this;if(e===void 0)e=true;this._unlistener=this._history.listen(function(n,e){r._change(n,e)});if(e){this._change(this.getCurrentLocation(),this.getCurrentAction())}};lt.prototype.stop=function n(){if(!this._unlistener){return}this._unlistener();this._unlistener=null};lt.prototype.on=function n(e,r,t,i){var a=[];var o=Je(e,a);this._routes.push({pattern:e,regexp:o,keys:a,onEnter:r,onBefore:t,onAfter:i});return this};lt.prototype.onBefore=function n(e){this._onBefore=e;return this};lt.prototype.onBeforeOnce=function n(e){this._onBeforeOnce=e;return this};lt.prototype.onAfter=function n(e){this._onAfter=e;return this};lt.prototype.onAfterOnce=function n(e){this._onAfterOnce=e;return this};lt.prototype.navigateTo=function n(e,r){var t=this;if(r===void 0)r=false;return pr.resolve().then(function(){if(!r&&t.getCurrentLocation().pathname===e){console.warn("same path is passed.");return}t._history.push(e)})};lt.prototype.replace=function n(e){var r=this;return pr.resolve().then(function(){if(r.getCurrentLocation().pathname===e){console.warn("same path is passed.");return}r._history.replace(e)})};lt.prototype.getCurrentLocation=function n(){return this._history.location};lt.prototype.getCurrentAction=function n(){return this._history.action};lt.prototype.createHref=function n(e){return this._history.createHref({pathname:e})};lt.prototype._change=function n(e){var r=this;var t=qe(this._routes,function(n){return!!n.regexp.exec(e.pathname)});if(!t){return}var i=this._parseLocation(e,t);var a=false;var o=function(n){a=true;r.replace(n)};pr.resolve().then(function(){if(!r._onBeforeOnce){return pr.resolve()}var n=r._onBeforeOnce;r._onBeforeOnce=null;return n(i)}).then(function(){if(!r._onBefore){return pr.resolve()}return r._onBefore(i)}).then(function(){if(!t.onBefore){return pr.resolve()}return t.onBefore(i,o)}).then(function(){if(a||!t.onEnter){return pr.resolve()}return t.onEnter(i)}).then(function(){if(a||!t.onAfter){return pr.resolve()}return t.onAfter(i)}).then(function(){if(a||!r._onAfter){return pr.resolve()}return r._onAfter(i)}).then(function(){if(a||!r._onAfterOnce){return pr.resolve()}var n=r._onAfterOnce;r._onAfterOnce=null;return n(i)}).catch(function(n){console.error(n.message||"couldn't route. check the onBefore and onAfter functions.")})};lt.prototype._parseLocation=function n(e,r){var t={};var i=r.regexp.exec(e.pathname).slice(1);Ne(r.keys,function(n,e){t[n.name]=i[e]});var a={};Ne(e.search.slice(1).split("&"),function(n){if(!n){return}var e=n.split("=");a[e[0]]=e[1]});var o=e.hash.slice(1);return{params:t,queries:a,hash:o,pathname:e.pathname}};lt.BROWSER=ft.BROWSER;lt.MEMORY=ft.MEMORY;lt.HASH=ft.HASH;return lt});